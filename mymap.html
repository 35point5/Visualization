<!doctype html>
<html>
    
<body>
<div id="container" style="width:1000px;height:1000px"></div>
<!-- 加载地图JSAPI脚本 -->
<script src="https://webapi.amap.com/maps?v=1.4.15&key=a1f20e56788bc5e9930326306872d63e&plugin=Map3D,AMap.DistrictLayer,AMap.Scale,AMap.ToolBar"></script>
<script>
    var httpRequest = new XMLHttpRequest();
    
    var disCountry = new AMap.DistrictLayer.Country({
    zIndex:10,
    SOC:'CHN',
    depth:2,
    styles:{
        'nation-stroke':'#22ffff',
        'coastline-stroke':[0.85, 0.63, 0.94, 1],
        'province-stroke':'white',
        'city-stroke': 'rgba(255,255,255,0.15)',//中国特有字段
        'fill':'red'
    }
    })
    var map = new AMap.Map('container', {
        resizeEnable: true, //是否监控地图容器尺寸变化
        zoom:5, //初始化地图层级
        center: [104.734012,33.381363], //初始化地图中心点
        layers:[disCountry,new AMap.TileLayer()]
    });
    AMap.plugin([
    'AMap.ToolBar',
    ], function(){
        // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件
        map.addControl(new AMap.ToolBar());
    });
    var _onClick = function(e) {
        console.log(e.lnglat)
        httpRequest.open('GET','https://restapi.amap.com/v3/geocode/regeo?key=a1f20e56788bc5e9930326306872d63e&location='+e.lnglat, true);//第二步：打开连接  将请求参数写在url中  ps:"./Ptest.php?name=test&nameone=testone"
        httpRequest.send();
    }
    map.on("click", _onClick);

    //第一步：建立所需的对象
            //第三步：发送请求  将请求参数写在URL中
            httpRequest.onreadystatechange = function () {
                if (httpRequest.readyState == 4 && httpRequest.status == 200) {
                    var json = JSON.parse(httpRequest.responseText);//获取到json字符串，还需解析
                    console.log(json.regeocode.addressComponent.city);
                }
            };
</script>
</body>
</html>